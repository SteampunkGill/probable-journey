<view class="profile-page">
  <view class="profile-content">
    <view class="avatar-section card">
      <view class="avatar-item" bindtap="handleAvatarClick">
        <text class="label">头像</text>
        <view class="right">
          <view class="avatar-wrapper">
            <image src="{{ form.avatarUrl || '/assets/images/icons/user.png' }}" class="avatar" mode="aspectFill" />
            <view wx:if="{{uploading}}" class="upload-mask">
              <view class="loading-spinner"></view>
            </view>
          </view>
          <text class="iconfont icon-right">></text>
        </view>
      </view>
    </view>

    <view class="form-section card">
      <view class="form-item">
        <text class="label">昵称</text>
        <input class="input" value="{{form.nickname}}" placeholder="请输入昵称" bindinput="onNicknameInput" />
      </view>
      <view class="form-item">
        <text class="label">性别</text>
        <radio-group class="gender-options" bindchange="onGenderChange">
          <label class="gender-label">
            <radio value="1" checked="{{form.gender == 1}}" color="#a0522d" /> 男
          </label>
          <label class="gender-label">
            <radio value="2" checked="{{form.gender == 2}}" color="#a0522d" /> 女
          </label>
          <label class="gender-label">
            <radio value="0" checked="{{form.gender == 0}}" color="#a0522d" /> 保密
          </label>
        </radio-group>
      </view>
      <view class="form-item">
        <text class="label">生日</text>
        <picker mode="date" value="{{form.birthday}}" bindchange="onBirthdayChange">
          <view class="picker-value">{{form.birthday || '请选择生日'}}</view>
        </picker>
      </view>
    </view>

    <view class="info-section card">
      <view class="form-item disabled">
        <text class="label">手机号</text>
        <text class="value">{{ userInfo.phone || '未绑定' }}</text>
      </view>
      <view class="form-item disabled">
        <text class="label">会员等级</text>
        <text class="value">{{ userInfo.levelName || '普通会员' }}</text>
      </view>
      <view class="form-item disabled">
        <text class="label">注册时间</text>
        <text class="value">{{ registrationTime }}</text>
      </view>
    </view>

    <button class="save-btn {{ loading ? 'disabled' : '' }}" bindtap="handleSave" disabled="{{loading}}">
      {{ loading ? '保存中...' : '保存修改' }}
    </button>
  </view>
</view>