<view class="gift-card-page">
  <view class="tabs-nav">
    <view 
      wx:for="{{tabs}}" 
      wx:key="index" 
      class="tab-item {{activeTab === index ? 'active' : ''}}" 
      bindtap="switchTab"
      data-index="{{index}}"
    >
      {{ item }}
    </view>
  </view>

  <view class="tab-content">
    <!-- 我的礼品卡 -->
    <view wx:if="{{activeTab === 0}}" class="my-cards">
      <view wx:if="{{giftCards.length > 0}}" class="card-list">
        <view wx:for="{{giftCards}}" wx:key="id" class="card-item {{item.status}}">
          <view class="card-main">
            <view class="card-no">NO. {{ item.cardNo }}</view>
            <view class="card-balance">
              <text class="unit">¥</text>
              <text class="val">{{ item.balance }}</text>
            </view>
            <view class="card-face">面额: ¥{{ item.faceValue }}</view>
          </view>
          <view class="card-badge {{item.status}}">
            {{ item.statusText }}
          </view>
          <view class="card-footer">
            有效期至: {{ item.expiryTime }}
          </view>
        </view>
      </view>
      <view wx:else class="empty-box">
        <view class="empty-icon">🎁</view>
        <text>暂无礼品卡</text>
      </view>
    </view>

    <!-- 购买礼品卡 -->
    <view wx:if="{{activeTab === 1}}" class="buy-cards">
      <view class="section-label">选择面额</view>
      <view class="price-grid">
        <view 
          wx:for="{{priceOptions}}" 
          wx:key="*this" 
          class="price-card {{selectedPrice === item ? 'active' : ''}}" 
          bindtap="selectPrice"
          data-price="{{item}}"
        >
          <view class="p-val">¥{{ item }}</view>
        </view>
      </view>
      <button class="primary-btn" bindtap="handleBuy" disabled="{{buying}}">
        {{ buying ? '处理中...' : '立即购买' }}
      </button>
    </view>

    <!-- 激活礼品卡 -->
    <view wx:if="{{activeTab === 2}}" class="activate-card">
      <view class="form-group">
        <view class="input-item">
          <text class="label">卡号</text>
          <input value="{{cardNo}}" bindinput="onCardNoInput" placeholder="请输入礼品卡卡号" />
        </view>
        <view class="input-item">
          <text class="label">券码</text>
          <input value="{{cardCode}}" bindinput="onCardCodeInput" placeholder="请输入8位激活券码" />
        </view>
      </view>
      <button class="primary-btn" bindtap="handleActivate" disabled="{{activating}}">
        {{ activating ? '激活中...' : '立即激活' }}
      </button>
      <view class="usage-tips">
        <view class="tips-title">温馨提示：</view>
        <view class="tips-li">• 请输入正确的卡号和券码进行激活。</view>
        <view class="tips-li">• 激活后礼品卡将绑定至您的账户，不可转让。</view>
        <view class="tips-li">• 礼品卡余额可用于支付订单。</view>
      </view>
    </view>
  </view>
</view>