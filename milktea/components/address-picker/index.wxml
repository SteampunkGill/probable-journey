<view class="address-picker">
  <!-- 选择按钮 -->
  <view class="picker-trigger" bindtap="showPicker">
    <view class="default-trigger {{value ? 'has-value' : ''}}">
      <text class="trigger-text">
        {{value ? displayText : placeholder}}
      </text>
      <text class="icon-right">></text>
    </view>
  </view>

  <!-- 地址选择弹窗 -->
  <view class="address-modal" wx:if="{{showModal}}">
    <view class="modal-mask" bindtap="hidePicker"></view>
    
    <view class="modal-content">
      <!-- 头部 -->
      <view class="modal-header">
        <text class="modal-title">选择地址</text>
        <view class="icon-close" bindtap="hidePicker">×</view>
      </view>

      <!-- 地址列表 -->
      <scroll-view scroll-y class="address-list">
        <view 
          class="address-item {{selectedId === item.id ? 'selected' : ''}}" 
          wx:for="{{addressList}}" 
          wx:key="id"
          bindtap="selectAddress"
          data-id="{{item.id}}"
        >
          <view class="address-header">
            <text class="address-name">{{item.name}}</text>
            <text class="address-phone">{{item.phone}}</text>
            <view class="address-tags">
              <text class="tag tag-default" wx:if="{{item.isDefault}}">默认</text>
            </view>
          </view>
          
          <view class="address-content">
            <text class="address-text">
              {{item.province}}{{item.city}}{{item.district}}{{item.detail}}
            </text>
          </view>
        </view>

        <!-- 空状态 -->
        <view class="empty-address" wx:if="{{addressList.length === 0}}">
          <text class="empty-text">暂无地址</text>
          <text class="empty-hint">请先添加地址</text>
        </view>
      </scroll-view>

      <!-- 底部操作 -->
      <view class="modal-footer">
        <button class="btn btn-secondary" bindtap="goToAddAddress">
          添加新地址
        </button>
        
        <button 
          class="btn btn-primary" 
          bindtap="confirmSelection"
          disabled="{{!selectedId}}"
        >
          确定
        </button>
      </view>
    </view>
  </view>
</view>