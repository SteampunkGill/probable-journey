<!-- components/product-card/product-card.wxml -->
<view class="product-card" bindtap="onTap" data-id="{{product.id}}">
  <!-- å•†å“å›¾ç‰‡ -->
  <view class="product-image-container">
    <image 
      src="{{product.image || product.mainImage}}" 
      class="product-image"
      mode="aspectFill"
      lazy-load="true"
    ></image>
    
    <!-- å•†å“æ ‡ç­¾ -->
    <view class="product-tags">
      <text class="tag tag-hot" wx:if="{{product.isHot}}">ğŸ”¥ çƒ­é”€</text>
      <text class="tag tag-new" wx:if="{{product.isNew}}">âœ¨ æ–°å“</text>
      <text class="tag tag-discount" wx:if="{{product.discount}}">{{product.discount}}</text>
    </view>
    
    <!-- æ”¶è—æŒ‰é’® -->
    <view 
      class="favorite-btn {{isFavorite ? 'active' : ''}}" 
      bindtap="onFavoriteTap" 
      catchtap="stopPropagation"
    >
      <image 
        class="favorite-icon" 
        src="{{isFavorite ? '/images/icons/heart-fill.png' : '/images/icons/heart.png'}}"
      ></image>
    </view>
    
    <!-- å”®ç½„é®ç½© -->
    <view class="sold-out-mask" wx:if="{{product.stock <= 0}}">
      <text>å·²å”®ç½„</text>
    </view>
  </view>
  
  <!-- å•†å“ä¿¡æ¯ -->
  <view class="product-info">
    <text class="product-name">{{product.name}}</text>
    
    <view class="product-meta">
      <text class="product-desc" wx:if="{{product.description}}">{{product.description}}</text>
    </view>
    
    <!-- ä»·æ ¼å’Œæ“ä½œ -->
    <view class="product-footer">
      <view class="price-section">
        <text class="current-price">Â¥{{product.price}}</text>
        <text class="original-price" wx:if="{{product.originalPrice > product.price}}">
          Â¥{{product.originalPrice}}
        </text>
      </view>
      
      <view class="action-section">
        <!-- è¯„åˆ† -->
        <view class="product-rating" wx:if="{{product.rating}}">
          <image class="star-icon" src="/images/icons/star.png"></image>
          <text>{{product.rating}}</text>
        </view>
        
        <!-- è´­ç‰©è½¦æŒ‰é’® -->
        <view 
          class="add-to-cart-btn" 
          bindtap="onAddToCart" 
          catchtap="stopPropagation"
          wx:if="{{product.stock > 0}}"
        >
          <image class="add-icon" src="/images/icons/add.png"></image>
        </view>
      </view>
    </view>
  </view>
</view>