<!-- components/address-picker/address-picker.wxml -->
<view class="address-picker">
  <!-- 选择按钮 -->
  <view class="picker-trigger" bindtap="showPicker">
    <slot name="trigger">
      <view class="default-trigger {{value ? 'has-value' : ''}}">
        <text class="trigger-text">
          {{value ? displayText : placeholder}}
        </text>
        <text class="iconfont icon-right"></text>
      </view>
    </slot>
  </view>

  <!-- 地址选择弹窗 -->
  <view class="address-modal" wx:if="{{showModal}}">
    <view class="modal-mask" bindtap="hidePicker"></view>
    
    <view class="modal-content">
      <!-- 头部 -->
      <view class="modal-header">
        <text class="modal-title">选择地址</text>
        <text class="iconfont icon-close" bindtap="hidePicker"></text>
      </view>

      <!-- 地址列表 -->
      <scroll-view class="address-list" scroll-y="true">
        <view 
          class="address-item {{selectedId === address.id ? 'selected' : ''}}" 
          wx:for="{{addressList}}" 
          wx:key="id"
          bindtap="selectAddress"
          data-id="{{address.id}}"
        >
          <view class="address-header">
            <text class="address-name">{{address.name}}</text>
            <text class="address-phone">{{address.phone}}</text>
            <view class="address-tags">
              <text class="tag tag-default" wx:if="{{address.isDefault}}">默认</text>
            </view>
          </view>
          
          <view class="address-content">
            <text class="address-text">
              {{address.province}}{{address.city}}{{address.district}}{{address.detail}}
            </text>
          </view>
        </view>

        <!-- 空状态 -->
        <view class="empty-address" wx:if="{{addressList.length === 0}}">
          <image src="/images/empty-address.png" class="empty-icon"></image>
          <text class="empty-text">暂无地址</text>
          <text class="empty-hint">请先添加地址</text>
        </view>
      </scroll-view>

      <!-- 底部操作 -->
      <view class="modal-footer">
        <button class="btn btn-secondary" bindtap="goToAddAddress">
          <text class="iconfont icon-add"></text>
          <text>添加新地址</text>
        </button>
        
        <button 
          class="btn btn-primary" 
          bindtap="confirmSelection"
          disabled="{{!selectedId}}"
        >
          确定
        </button>
      </view>
    </view>
  </view>
</view>