<view class="complaint-page">
  <view class="form-group">
    <view class="label">投诉类型</view>
    <picker bindchange="onTypeChange" value="{{typeIndex}}" range="{{types}}">
      <view class="picker">
        {{types[typeIndex]}}
      </view>
    </picker>
  </view>

  <view class="form-group">
    <view class="label">投诉内容</view>
    <textarea class="content-input" placeholder="请详细描述您遇到的问题..." bindinput="onContentInput" maxlength="500"></textarea>
    <view class="word-count">{{content.length}}/500</view>
  </view>

  <view class="form-group">
    <view class="label">上传图片 (可选)</view>
    <view class="image-list">
      <view class="image-item" wx:for="{{images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" bindtap="previewImage" data-url="{{item}}"></image>
        <view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">×</view>
      </view>
      <view class="upload-btn" bindtap="chooseImage" wx:if="{{images.length < 4}}">
        <text class="plus">+</text>
        <text class="hint">最多4张</text>
      </view>
    </view>
  </view>

  <view class="form-group">
    <view class="label">联系电话</view>
    <input class="phone-input" type="number" placeholder="请输入您的联系电话" bindinput="onPhoneInput" value="{{phone}}" />
  </view>

  <view class="footer">
    <button class="submit-btn {{loading ? 'disabled' : ''}}" bindtap="submitComplaint" disabled="{{loading}}">
      {{loading ? '提交中...' : '提交投诉'}}
    </button>
  </view>
</view>