<!--pages/coupon/coupon.wxml-->
<view class="coupon-page">
  <view class="tabs">
    <view class="tab {{activeTab === item.key ? 'active' : ''}}" 
          wx:for="{{tabs}}" 
          wx:key="key"
          bindtap="switchTab" 
          data-tab="{{item.key}}">
      {{item.name}}
    </view>
  </view>

  <view class="coupon-list" wx:if="{{coupons.length > 0}}">
    <view class="coupon-item" wx:for="{{coupons}}" wx:key="id">
      <view class="coupon-left">
        <text class="value">¥{{item.value}}</text>
        <text class="condition">满{{item.minAmount}}元可用</text>
      </view>
      <view class="coupon-right">
        <text class="name">{{item.name}}</text>
        <text class="desc">{{item.description}}</text>
        <text class="expire">有效期至{{item.expireTime}}</text>
        <button class="use-btn" wx:if="{{activeTab === 'available'}}" bindtap="useCoupon" data-id="{{item.id}}">立即使用</button>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <text>暂无优惠券</text>
  </view>
</view>
