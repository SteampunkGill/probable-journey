<!--pages/payment/payment.wxml-->
<view class="payment-page">
  <view class="header">
    <view class="amount-section">
      <text class="label">订单金额</text>
      <text class="amount">¥{{order.totalAmount}}</text>
    </view>
    
    <view class="countdown">
      <text>剩余支付时间：</text>
      <text class="time">{{formatCountdown(countdown)}}</text>
    </view>
  </view>

  <view class="payment-methods">
    <view class="section-title">选择支付方式</view>
    
    <view class="method-item {{paymentMethod === 'wechat' ? 'active' : ''}}" bindtap="switchPaymentMethod" data-method="wechat">
      <view class="method-info">
        <image class="method-icon" src="/images/icons/wechat-pay.png" mode="aspectFit"></image>
        <text class="method-name">微信支付</text>
      </view>
      <view class="radio {{paymentMethod === 'wechat' ? 'checked' : ''}}"></view>
    </view>
    
    <view class="method-item {{paymentMethod === 'balance' ? 'active' : ''}}" bindtap="switchPaymentMethod" data-method="balance">
      <view class="method-info">
        <image class="method-icon" src="/images/icons/balance.png" mode="aspectFit"></image>
        <view class="method-detail">
          <text class="method-name">余额支付</text>
          <text class="balance">余额：¥86.50</text>
        </view>
      </view>
      <view class="radio {{paymentMethod === 'balance' ? 'checked' : ''}}"></view>
    </view>
  </view>

  <view class="order-info">
    <view class="section-title">订单信息</view>
    <view class="info-item">
      <text class="label">订单编号</text>
      <text class="value">{{order.orderNo}}</text>
    </view>
    <view class="info-item">
      <text class="label">下单时间</text>
      <text class="value">{{order.createTime}}</text>
    </view>
  </view>

  <view class="footer">
    <button class="cancel-btn" bindtap="cancelOrder">取消订单</button>
    <button class="pay-btn {{paying ? 'disabled' : ''}}" bindtap="submitPayment" disabled="{{paying}}">
      {{paying ? '支付中...' : '确认支付'}}
    </button>
  </view>
</view>
