<!--pages/address/edit.wxml-->
<view class="edit-page">
  <view class="form">
    <!-- 收货人信息 -->
    <view class="form-section">
      <view class="form-item">
        <text class="label required">收货人</text>
        <input class="input" placeholder="请输入姓名" value="{{formData.name}}" bindinput="onNameInput" maxlength="20" />
      </view>
      
      <view class="form-item">
        <text class="label required">手机号</text>
        <input class="input" type="number" placeholder="请输入手机号" value="{{formData.phone}}" bindinput="onPhoneInput" maxlength="11" />
      </view>
    </view>

    <!-- 地区选择 -->
    <view class="form-section">
      <picker mode="region" bindchange="onRegionChange" value="{{[formData.province, formData.city, formData.district]}}">
        <view class="form-item clickable">
          <text class="label required">所在地区</text>
          <view class="region-display">
            <text wx:if="{{formData.province}}" class="region-text">{{formData.province}} {{formData.city}} {{formData.district}}</text>
            <text wx:else class="placeholder">请选择省市区</text>
            <text class="arrow">›</text>
          </view>
        </view>
      </picker>
      <view class="location-btn" bindtap="onLocationClick">
        <text class="iconfont icon-location"></text>
        <text>智能定位</text>
      </view>
    </view>

    <!-- 详细地址 -->
    <view class="form-section">
      <view class="form-item textarea-item">
        <text class="label required">详细地址</text>
        <textarea 
          class="textarea" 
          placeholder="请输入街道、门牌号等详细信息" 
          value="{{formData.detail}}" 
          bindinput="onDetailInput"
          maxlength="100"
          auto-height
        ></textarea>
      </view>
    </view>

    <!-- 地址标签 -->
    <view class="form-section">
      <text class="section-title">地址标签</text>
      <view class="label-options">
        <view class="label-item {{formData.tag === item ? 'active' : ''}}" 
              wx:for="{{labelOptions}}" 
              wx:key="*this"
              bindtap="selectLabel"
              data-label="{{item}}">
          {{item}}
        </view>
      </view>
    </view>

    <!-- 默认地址 -->
    <view class="form-section">
      <view class="form-item">
        <text class="label">设为默认地址</text>
        <switch checked="{{formData.isDefault}}" bindchange="toggleDefault" color="#36CFC9" />
      </view>
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="footer">
    <button class="delete-btn" wx:if="{{isEditMode}}" bindtap="deleteAddress">删除地址</button>
    <button class="save-btn {{submitting ? 'disabled' : ''}}" bindtap="saveAddress" disabled="{{submitting}}">
      {{submitting ? '保存中...' : '保存'}}
    </button>
  </view>
</view>
